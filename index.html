<meta charset="utf-8" />
<script src="bundle.js"></script>
<style>
.assembly,
.assembly div {
  position: absolute;
  top: 0;
  left: 0;
  transform-style: preserve-3d;
  transform-origin: 0 0;
  backface-visibility: hidden;
}

/*body > .assembly::after {
  content: "â˜º";
  font-size: 300px;
  line-height: 500px;
  text-align: center;
  width: 100%;
  position: absolute;
}*/

.cap, .top, .bottom, .left, .right, .front, .back {
  border: 1px inset rgba(0,0,0,0.2);
}

html,body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  margin: 0;
  background: #123;
}
.viewport {
  width: 100%;
  height: 100%;
  transform-origin: 50% 50%;
  background: transparent !important;
}
.plate {
  transition: transform 0.3s;
}
.face {
  background-color: #fc0;
}
</style>
<script type="text/javascript">
  var lastX = 0
    , lastY = 0
    , curX = 0
    , curY = 0
    , down = false
    , s = 1
    , el

  window.onmousedown = function (ev) {
    if (ev.button !== 0) {
      return
    }
    el = el || document.body.firstChild
    el.style.transition = 'none'
    lastX = ev.clientX
    lastY = ev.clientY
    down = true
    move(ev)
  }
  window.onmousemove = function (ev) {
    if (down) {
      move(ev)
    }
  }
  window.onmouseup = function (ev) {
    if (down) {
      down = false
      // el.style.transition = null
    }
  }

  window.onmousewheel = function (ev) {
    el = el || document.body.firstChild
    s += ev.deltaY/1000
    s = Math.min(Math.max(s, 0.05), 1)
    update()
    ev.preventDefault()
  }

  function update() {
    el.style.transform = 'rotateX(' + (-curY)/(2*Math.PI) + 'rad) rotateY(' + (curX)/(2*Math.PI) + 'rad) scale3d(' + s + ',' + s + ',' + s + ')'
  }

  function move(ev) {
    var x = ev.clientX
      , y = ev.clientY
      , dx = x - lastX
      , dy = y - lastY

    curX += dx / 20
    curY += dy / 10
    update()
    lastX = x
    lastY = y
  }
</script>
